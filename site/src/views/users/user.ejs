<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles.css">
    <link href="/img/logo/logo-beerbar.png" type="image/x-icon" rel="shortcut icon" />
    <!-- Iconos -->
    <script src="https://kit.fontawesome.com/e41faadd8e.js" crossorigin="anonymous"></script>
    <!--  Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script> -->

    <title>Usuario</title>
</head>
<body class="user">
    <%- include('../partials/header') %>
    <main>

<section class="perfil"> 
  <article class="A">
    <div class="img">
      <img class="avatar" src="../img/usuarios/<%= locals.userLogin.image %>" alt="">
    </div> 
  
    <div class="datos"> 
      <h2>Mis datos:</h2>
      <ul class="lista"> <h3>
          <li>
            Nombre: <%= `${locals.userLogin.nombre}`%>
          </li>
          <li>
            Apellido: <%= locals.userLogin.apellido%>
          </li>
          <li>
            Rol: <%= locals.userLogin.rol === 1? 'Usuario' : locals.userLogin.rol === 2? 'Administrador': "superAdmin" %>
          </li>  
      </ul>
    </div>
  </article>

  <div class="botones" >

    <a href="/users/editarUser/<%= locals.userLogin.id %>">
      <button class="boton">Editar Usuario</button>
    </a>
  </div>

  <% if (locals.userLogin && (locals.userLogin.rol === 2 || locals.userLogin.rol === 3)) { %>
    <article>
      <button class="btn-list boton" id="btn-Userlist">Ver Usuarios</button>

      <div id="listaUsuarios" class="usersList">

        <button id="btn-cerrar">X</button>

        <div class="table-responsive search">
          <div class="filtros col-12 d-flex flex-wrap" id="filter">
          <div class="col-12 my-1">
              <input class="form-control" name="apellido" type="text" placeholder="Name">
          </div>
          <div class="col-3 my-1">
              <select class="form-select" name="roles_id" aria-label="Default select example">
                  <option value="0" selected >rol</option>
                <% roles.forEach(element => { %>
                  <option value="<%- element.id %> "><%- element.title %></option>
                <% }) %>
              </select>
          </div>
          <div class="col-3 my-1">
              <select class="form-select" name="orderDirect" aria-label="Default select example">
                  <option value="0" selected >Order By</option>
                  <option value="ASC">Ascendente</option>
                  <option value="DESC">Descendente</option>
              </select>
          </div>
          </div>
      </div>
      
        <div class="table-responsive container margin">
          <table class="table">
              <thead>
              <tr>
              <th scope="col">#</th>
              <th scope="col">Nombre</th>
              <th scope="col">Apellido</th>
              <th scope="col">Rol</th>
              <th scope="col">accion</th>
              </tr>
              </thead>
              <tbody id="tbody">
                  
              </tbody>
          </table>
      </div>

      <div id="msgResult"></div>

        <div class="col-12 d-flex justify-content-between align-items-center">

            <nav aria-label="Page navigation example" class="navPages">
              <ul class="pagination justify-content-end" class="pages" id="pages-links">
              </ul>
            </nav>
            
        </div>
    </div>
    </article>
  <% } %>
</section>

<template id="tempalte-tbody">
  <tr>        
      <th id="id" scope="row"></th>
      <td id="nombre"></td>
      <td id="apellido"></td>
      <td id="rol"></td>
      <td class="td-buttom">

        <form action="" id="editar-form" class="editarform" method="post">
          
          <div class="userRols" id="userRols">
            <!-- <h2 id="btn-rol">Cambiar rol</h2> -->
            <select name="rolSelect" id="rolSelect">
              <option value="" selected hidden>Cambiar rol</option>
              <option value="1">Usuario</option>
              <option value="2">Administrador</option>
            </select>
            <button type="submit">Cambiar</button>
          </div>
        </form>

        <!-- <form id="btn-eliminar" class="trashForm" action="" method="post" >
          <button type="submit" id="eliminar" class="trash"><i class="fa-solid fa-trash-can icon"></i></button>
        </form>  -->
          <!-- <a id="btn-editar" href=""> 
            <button class="edit">
              <i class="fa-solid fa-pen-to-square icon"></i>
            </button>
          </a> -->
          
      </td>
  </tr>
</template>

</main>
    
    <%- include('../partials/footer') %>
    <script src="/js/paginacionUsuariosAD.js"></script>
</body>
</html>

